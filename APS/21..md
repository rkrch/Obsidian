27. Микроконтроллеры. Определение, виды, характеристики, особенности построения и применения.

Микроконтроллер —это устройство, выполненное по технологии БИС и объединяющее на одном кристалле микропроцессор, память, порты ввода-вывода, а также средства поддержки работы в реальном масштабе времени (таймеры, обработчики прерываний и т.д.).

Основные виды МК

B однокристальных микроконтроллерах используется гарвардская архитектура. Согласно ее концепциям память программ и память данных имеют раздельные адресные пространства, при обращении к которым используются различные механизмы адресации. Содержимое памяти программ формируется либо на заводе-изготовителе (масочное программирование), либо с использованием программатора пользователя (электрическое программирование).

Современные микроконтроллеры можно разделить на три основных типа:

a) встраиваемые 8-разрядные микроконтроллеры; б) 16- и 32-разрядные микроконтроллеры; в) цифровые сигнальные процессоры.

Во встраиваемых микроконтроллерах все необходимые ресурсы (память, таймеры, порты ввода-вывода и т.д.) располагаются на одном кристалле с процессорным ядром, благодаря чему обеспечивается их включение в систему управления с использованием минимального количества дополнительных компонентов. Для них характерны небольшие по современным понятиям объемы памяти программ (ROM объемом от 1 до 128 Кбайт) и памяти данных (RAM объемом от 64 байт до 4 Кбайта). Кроме того, обычно исключается возможность записи в память программ, что уменьшает вероятность ошибок, и имеется защита от несанкционированного копирования содержимого этой памяти. Типичный микроконтроллер для встроенных приложений потребляет ток от микроампер до десятка миллиампер и обычно работает в температурном диапазоне от -55 до +125°С. Программируются такие контроллеры на языках ассемблер или С.

В более сложных микроконтроллерах (16- и 32-разрядных) используют только внешнюю память, которая включает в себя как память программ (ROM), так память данных (RAM). Они применяются в системах, где требуется большой объем памяти и относительное небольшое количество устройств (портов) ввода/вывода. Типичным примером применения такого МК с внешней памятью является котроллер жесткого диска (HDD) с буферной кэш-памятью, который обеспечивает промежуточное хранение и распределение больших объемов данных (порядка нескольких мегабайт). Внешняя память позволяет такому микроконтроллеру работать с более высокой скоростью, чем встраиваемый МК.

Цифровые сигнальные процессоры (DSP) предназначены для цифровой обработки аналоговых сигналов, т.е. для решения задач, которые традиционно решала аналоговая схемотехника. Они обеспечивают ввод данных от аналогового источника, их обработку и формирование соответствующего выходного сигнала в реальном масштабе времени. К сигнальным процессорам предъявляются специфические требования. От них требуются максимальное быстродействие, малые габариты, легкая стыковка с аналого-цифровыми и цифро-аналоговыми преобразователями, большая разрядность обрабатываемых данных и небольшой набор математических операций, обязательно включающий операцию умножения-накопления и аппаратную организацию циклов. На процессорах такого типа сделано большинство модемов, а также различные системы обработки звука и видео.

Для подключения внешних устройств в микроконтроллерах применяются как параллельные порты ввода/вывода, так и последовательные шины типа 12C (Inter-Integrated Circuit bus) или SPI (serial peripheral interface). Благодаря этим шинам для подключения периферийных микросхем к процессору достаточно двух-трех линий. Соответственно, уменьшается число выводов микросхем, позволяя уменьшить габариты устройств, повысить надежность и упростить разработку устройств.

Следует также различать CISC и RISC-микроконтроллеры. Команды RISC- процессоров очень просты и почти всегда выполняются за один такт. Для реализации операции, обрабатываемой CISC-процессором как одна команда, RISC должен выполнить последовательность микрокоманд. Достоинством CISC- микроконтроллеров является сокращенный объем программного кода и экономия усилий программиста, затраченных на его написание. Однако RISC-процессоры производительнее, занимают меньше места на кристалле и потребляют значительно меньше энергии, чем CISC. Поэтому в последнее время появляется все больше типов микроконтроллеров с RISC-архитектурой.

Основные характеристики МК - тактовая частота, объем доступной памяти программ и данных, количество и типы периферийных устройств, энергопотребление и т. д.

Титульная страница даташита пиковского МК (который рассматривался на лекции) с основными характеристиками.

![](file:///C:/Users/kravr/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg)

[PIC16(L)F18313/18323](https://static.chipdip.ru/lib/952/DOC011952772.pdf) [Data](https://static.chipdip.ru/lib/952/DOC011952772.pdf) [Sheet](https://static.chipdip.ru/lib/952/DOC011952772.pdf) [(chipdip.ru)](https://static.chipdip.ru/lib/952/DOC011952772.pdf) - ссылка на даташит

Память МК и его программирование

В микроконтроллерах используется три основных вида памяти: память программ, память данных, регистры. Память программ представляет собой постоянную память, предназначенную для хранения программного кода и констант. Она не изменяет содержимого в процессе выполнения программы. Память данных предназначена для хранения переменных в ходе выполнения программы. Регистры включают внутренние регистры процессора и регистры, используемые для управления периферийными устройствами. Следует заметить, что в микроконтроллерах семейств MCS-48/51 в качестве регистров используется специальная область внутренней (резидентной) памяти данных. Кроме того, наряду с внутренней памятью большинство микроконтроллеров могут использовать и внешнюю память программ и данных.

Для хранения программ обычно служит один из видов постоянной памяти: ROM (масочные ПЗУ), PROM (однократно программируемые ПЗУ), EPROM (электрически программируемые ПЗУ с ультрафиолетовым стиранием) или EEPROM (ПЗУ с электрической записью и стиранием, к этому виду также относятся современные микросхемы Flash-памяти). Все эти виды памяти являются энергонезависимыми, т.е. содержимое такой памяти сохраняется после выключения питания.

Для программирования микроконтроллеров (т.е. записи в них программ) обычно используются специальные устройства - программаторы, подключаемые к персональному компьютеру. Исключением является микроконтроллеры с ROM- памятью, программирование которых осуществляется в процессе изготовления. Однако в настоящее время программирование EEPROM-памяти можно осуществлять и непосредственно на плате проектируемого или уже готового устройства. Такой способ получил название - ISP (In System Programming), он позволяет обновлять программное обеспечение микроконтроллера без удаления из платы, что дает большую экономию времени на этапе разработки.

Последние модели микроконтроллеров содержат встроенную Flash-память, которая функционально мало отличается от EEPROM. Основное различие состоит в способности стирания записанной информации. В памяти EEPROM стирание производится отдельно для каждой ячейки, а во Flash-памяти стирание осуществляется целыми блоками.

Для хранения данных используется RAM - оперативное запоминающее устройство. Число циклов чтения и записи в такой памяти неограниченно, но при отключение питания вся информация теряется.